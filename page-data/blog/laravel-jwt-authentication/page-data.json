{"componentChunkName":"component---src-templates-post-jsx","path":"/blog/laravel-jwt-authentication","webpackCompilationHash":"b356b54f857e2a109c2d","result":{"data":{"markdownRemark":{"html":"<p>For creating REST API we use jwt token for stateless authentication. In this post I will show you how to add jwt to laravel for api authentication.</p>\n<h4>Laravel project setup</h4>\n<p>We can install laravel simply by composer command</p>\n<div class=\"gatsby-highlight\" data-language=\"no-highlight\"><pre class=\"language-no-highlight\"><code class=\"language-no-highlight\"># composer create-project --prefer-dist laravel/laravel laravel-jwt</code></pre></div>\n<p>After laravel installetion we then move to jwt part. We will use the package <a href=\"https://github.com/tymondesigns/jwt-auth\">jwt-auth</a> in our project. We will use develop version to avoid issue.</p>\n<div class=\"gatsby-highlight\" data-language=\"no-highlight\"><pre class=\"language-no-highlight\"><code class=\"language-no-highlight\"># composer require tymon/jwt-auth:dev-develop --prefer-source</code></pre></div>\n<p>In config/app.php add this to providers array</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nTymon\\<span class=\"token package\">JWTAuth<span class=\"token punctuation\">\\</span>Providers<span class=\"token punctuation\">\\</span>LaravelServiceProvider</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Add the following facades to aliases array.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'JWTAuth'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> Tymon\\<span class=\"token package\">JWTAuth<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>JWTAuth</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> \n<span class=\"token single-quoted-string string\">'JWTFactory'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> Tymon\\<span class=\"token package\">JWTAuth<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>JWTFactory</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Run this command to publish JWT config file</p>\n<div class=\"gatsby-highlight\" data-language=\"no-highlight\"><pre class=\"language-no-highlight\"><code class=\"language-no-highlight\">$ php artisan vendor:publish --provider=&quot;Tymon\\JWTAuth\\Providers\\LaravelServiceProvider&quot;</code></pre></div>\n<p>Then run this to generate secret key</p>\n<div class=\"gatsby-highlight\" data-language=\"no-highlight\"><pre class=\"language-no-highlight\"><code class=\"language-no-highlight\">$ php artisan jwt:secret</code></pre></div>\n<p>After that we need to use Tymon\\JWTAuth\\Contracts\\JWTSubject interface in our User model and implement methods getJWTIdentifier and getJWTCustomClaims.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Notifications<span class=\"token punctuation\">\\</span>Notifiable</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Contracts<span class=\"token punctuation\">\\</span>Auth<span class=\"token punctuation\">\\</span>MustVerifyEmail</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Foundation<span class=\"token punctuation\">\\</span>Auth<span class=\"token punctuation\">\\</span>User</span> <span class=\"token keyword\">as</span> Authenticatable<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Tymon<span class=\"token punctuation\">\\</span>JWTAuth<span class=\"token punctuation\">\\</span>Contracts<span class=\"token punctuation\">\\</span>JWTSubject</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Authenticatable</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">JWTSubject</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">Notifiable</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * The attributes that are mass assignable.\n     *\n     * @var array\n     */</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$fillable</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * The attributes that should be hidden for arrays.\n     *\n     * @var array\n     */</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$hidden</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'password'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'remember_token'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getJWTIdentifier</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getJWTCustomClaims</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\n<span class=\"token punctuation\">}</span></span></code></pre></div>","timeToRead":1,"excerpt":"For creating REST API we use jwt token for stateless authentication. In this post I will show you how to add jwt to laravel for apiâ€¦","frontmatter":{"title":"JWT authentication with laravel","cover":"https://unsplash.it/400/300/?random?BigTest","date":"2019-11-09","category":"moar","tags":["laravel","restapi"],"posttype":null,"featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHppTqatH//xAAWEAEBAQAAAAAAAAAAAAAAAAABEAD/2gAIAQEAAQUCjm//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAAAAREhEDGR/9oACAEBAAE/IZolyNZqzuP/2gAMAwEAAgADAAAAELfP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EKx//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Qqv/EABsQAQADAQEBAQAAAAAAAAAAAAEAESExQXGR/9oACAEBAAE/EDydl2kCuZB9S1FutdhjY2+soeh+T//Z","aspectRatio":1.7777777777777777,"src":"/static/8c39a9628ad1a740b866bc0f32ed9706/30037/banner.jpg","srcSet":"/static/8c39a9628ad1a740b866bc0f32ed9706/10bdc/banner.jpg 158w,\n/static/8c39a9628ad1a740b866bc0f32ed9706/f4ab0/banner.jpg 315w,\n/static/8c39a9628ad1a740b866bc0f32ed9706/30037/banner.jpg 630w,\n/static/8c39a9628ad1a740b866bc0f32ed9706/9810d/banner.jpg 945w,\n/static/8c39a9628ad1a740b866bc0f32ed9706/ff2e4/banner.jpg 1260w,\n/static/8c39a9628ad1a740b866bc0f32ed9706/c108b/banner.jpg 1280w","sizes":"(max-width: 630px) 100vw, 630px"}}}},"fields":{"slug":"/laravel-jwt-authentication","date":"2019-11-09T00:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/laravel-jwt-authentication","nexttitle":"Big Test","nextslug":"/big-sample-test","prevtitle":"Project one","prevslug":"/project-one"}}}